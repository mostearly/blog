{"componentChunkName":"component---src-templates-post-index-tsx","path":"/post/graphql-chaxun-yuju-biji","result":{"data":{"markdownRemark":{"html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 925px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/af10f679579eafe084370a60fcebea10/c1b63/og_image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.38095238095239%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABUElEQVQoz2MQk1NDQ+Jyauoy+iZSZks4S6fx5OpJG6vL6IljKAMiBjS+qJyqtKzGCs7yYsEoRwk7Fwn7ev7E2VwFwnIqhDVLyKnzyyv5iLnECvuJyKnIympGi/h4iDsJyCsBpQhoBjoPqK6HNz1axFdCVh3IzRAKaeBL5JNXJKBZHCwtJafeyZvWwpeSJByQIBzQzptaxx8P9I44fs0icqoi8qpA1wJdLiSn3MeTWcUfx6kgLyivJCKvApTCrlkcrFNVRs9a0lpNRk9BRkdKVkNL2tBc0gIoaCRlaiFpqS6tDww2cWya1QXllc0lLYEhHCDq5ifmGiPi6y/mGirqGSzq7iRuBwwzbzFnoP3iWJ0NtFlRRsdM0gIYyYbSJg4Sdm7ijprSBsqyukCbrSSsgJYryeoCleH0M9B+oNuE5FUE5ZSBXCBDFCSoAkGiqN4GAPOtWPU9GZzZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/af10f679579eafe084370a60fcebea10/a42d1/og_image.webp 231w,\n/static/af10f679579eafe084370a60fcebea10/a7d21/og_image.webp 463w,\n/static/af10f679579eafe084370a60fcebea10/31b98/og_image.webp 925w,\n/static/af10f679579eafe084370a60fcebea10/92f8c/og_image.webp 1200w\"\n          sizes=\"(max-width: 925px) 100vw, 925px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/af10f679579eafe084370a60fcebea10/6e622/og_image.png 231w,\n/static/af10f679579eafe084370a60fcebea10/71ce0/og_image.png 463w,\n/static/af10f679579eafe084370a60fcebea10/2a50c/og_image.png 925w,\n/static/af10f679579eafe084370a60fcebea10/c1b63/og_image.png 1200w\"\n          sizes=\"(max-width: 925px) 100vw, 925px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/af10f679579eafe084370a60fcebea10/2a50c/og_image.png\"\n          alt=\"graphql\"\n          title=\"graphql\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">graphql</figcaption>\n  </figure></p>\n<p>学习GraphQL时的一些笔记</p>\n<h2>编写GraphQL查询语句</h2>\n<p>每一个查询语句都应该拥有一个操作类型以及操作名称</p>\n<p>目前操作类型有：<code class=\"language-text\">query</code>，<code class=\"language-text\">mutation</code>，<code class=\"language-text\">subscription</code></p>\n<p>操作名称和为函数命名是同样的道理</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> QueryName <span class=\"token punctuation\">{</span>\n    node <span class=\"token punctuation\">{</span>\n        name\n        friends\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>使用变量</h2>\n<p>变量使用<code class=\"language-text\">$</code>来作为前缀，亦可以理解为声明</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> QueryName<span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">:</span> Int<span class=\"token operator\">!</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    node<span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        name\n        friends\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>上述查询中<code class=\"language-text\">$id</code>便是声明的变量，<code class=\"language-text\">Int</code>为类型，如果不加<code class=\"language-text\">!</code>便代表这是可选的，加了便是必需的</p>\n<h3>默认变量</h3>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> QueryName<span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">!</span>Int <span class=\"token operator\">=</span> <span class=\"token number\">120547</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    node<span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        name\n        friends\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>指令</h3>\n<p>指令能动态的改变结果</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> QueryName<span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">!</span>Int <span class=\"token operator\">=</span> <span class=\"token number\">120547</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$withSex</span><span class=\"token punctuation\">:</span> Boolean<span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$withFamily</span><span class=\"token punctuation\">:</span> Boolean<span class=\"token operator\">!</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    node<span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        name\n        <span class=\"token comment\"># 字段的使用方式</span>\n        sex<span class=\"token directive function\">@include</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">if</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$withSex</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 片段使用</span>\n        family<span class=\"token punctuation\">(</span><span class=\"token directive function\">@include</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">if</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$withFamily</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            name\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>下列是每个GraphQL都应实现支持的指令：</p>\n<ul>\n<li><code class=\"language-text\">@include(if: Boolean)</code>参数为<code class=\"language-text\">true</code>时包含这个字段或者片段</li>\n<li><code class=\"language-text\">@skip(if: Boolean)</code>为<code class=\"language-text\">true</code>时跳过该字段</li>\n</ul>\n<h2>编写变更语句</h2>\n<p>使用操作类型<code class=\"language-text\">mutation</code></p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">mutation</span> CreateComment<span class=\"token punctuation\">(</span><span class=\"token variable\">$userId</span><span class=\"token punctuation\">:</span> Int<span class=\"token punctuation\">,</span> <span class=\"token variable\">$content</span><span class=\"token punctuation\">:</span> String<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\"># 假装提交一个评论</span>\n    createComment<span class=\"token punctuation\">(</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$userId</span><span class=\"token punctuation\">,</span> <span class=\"token attr-name\">content</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$content</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        status\n        message\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>关于变更语句和查询语句中的字段执行顺序</h2>\n<p>查询字段时，是进行并行执行的</p>\n<p>变更字段时，是线性执行，从上到下</p>","id":"db58e1a7-8361-5cfd-85e3-9ccbcfd6f79b","fields":{"title":"GraphQL查询语句笔记","tags":["GraphQL","JavaScript"],"category":"笔记","date":"2019-03-26T17:09:00+08:00","dateModified":"2019-08-20T04:05:20+08:00","slug":"/post/graphql-chaxun-yuju-biji","status":true,"comment":true},"excerpt":"学习GraphQL时的一些笔记 编写GraphQL…"}},"pageContext":{"slug":"/post/graphql-chaxun-yuju-biji","prev":{"slug":"/post/yixie-xin-de-gongneng-biji","title":"一些新的功能笔记","date":"2019-03-07T13:05:57+08:00","category":"笔记","tags":["JavaScript"],"type":"post"},"next":{"slug":"/post/yici-huijia-zai-tiandi-de-paishe","title":"一次回家在田地的拍摄","date":"2019-06-30T01:30:54+08:00","category":"记录","tags":[],"type":"post"}}}}