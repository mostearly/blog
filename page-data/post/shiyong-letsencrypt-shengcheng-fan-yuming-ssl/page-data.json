{"componentChunkName":"component---src-templates-post-index-tsx","path":"/post/shiyong-letsencrypt-shengcheng-fan-yuming-ssl","result":{"data":{"markdownRemark":{"html":"<p>本记录在Debian 10上通过，虽说是Debian但是其他Linux一样可以使用</p>\n<h2>获取acme.sh</h2>\n<p>参考: <a href=\"https://github.com/Neilpang/acme.sh/wiki/How-to-install\" target=\"_blank\" rel=\"noopener\">https://github.com/Neilpang/acme.sh/wiki/How-to-install</a></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"token comment\"># 从Git克隆</span>\n<span class=\"token function\">git</span> clone https://github.com/Neilpang/acme.sh.git\n<span class=\"token builtin class-name\">cd</span> acme.sh\n<span class=\"token comment\"># 安装</span>\n./acme.sh --install  <span class=\"token punctuation\">\\</span>\n--home /usr/local/letsencrypt <span class=\"token punctuation\">\\</span>\n--config-home /usr/local/letsencrypt/data <span class=\"token punctuation\">\\</span>\n--cert-home  /var/www/ssl <span class=\"token punctuation\">\\</span>\n--accountemail  <span class=\"token string\">\"mall@example.com\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>注意：</p>\n<ul>\n<li>\n<p>此处安装在<code class=\"language-text\">/usr/local/</code>下，可能出现权限不足，证书存放在<code class=\"language-text\">/var/www/</code>下</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> <span class=\"token function\">chown</span> -R <span class=\"token punctuation\">{</span>username<span class=\"token punctuation\">}</span> /usr/local\n<span class=\"token function\">sudo</span> <span class=\"token function\">chown</span> -R <span class=\"token punctuation\">{</span>username<span class=\"token punctuation\">}</span> /usr/local</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h2>生成证书</h2>\n<h3>重启终端</h3>\n<p>重启终端使别名生效</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"token builtin class-name\">logout</span>\n<span class=\"token comment\"># 或</span>\n<span class=\"token builtin class-name\">exit</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h3>导出ID</h3>\n<p>参考: <a href=\"https://github.com/Neilpang/acme.sh/wiki/dnsapi\" target=\"_blank\" rel=\"noopener\">https://github.com/Neilpang/acme.sh/wiki/dnsapi</a></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"token comment\"># 腾讯云 DNSPod</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">DP_Id</span><span class=\"token operator\">=</span><span class=\"token string\">\"13****\"</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">DP_Key</span><span class=\"token operator\">=</span><span class=\"token string\">\"f047ab5************be455a82875e8\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h3>生成</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\">acme.sh --issue <span class=\"token punctuation\">\\</span>\n--dns dns_dp <span class=\"token punctuation\">\\</span>\n-d <span class=\"token punctuation\">{</span>example.com<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">\\</span>\n-d <span class=\"token punctuation\">{</span>*.example.com<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>最后输出以下的数据就完成</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>Mon <span class=\"token number\">23</span> Dec <span class=\"token number\">2019</span> 06:21:49 PM CST<span class=\"token punctuation\">]</span> Your cert is <span class=\"token keyword\">in</span>  /var/www/ssl/<span class=\"token punctuation\">{</span>example.com<span class=\"token punctuation\">}</span>/<span class=\"token punctuation\">{</span>example.com<span class=\"token punctuation\">}</span>.cer\n<span class=\"token punctuation\">[</span>Mon <span class=\"token number\">23</span> Dec <span class=\"token number\">2019</span> 06:21:49 PM CST<span class=\"token punctuation\">]</span> Your cert key is <span class=\"token keyword\">in</span>  /var/www/ssl/<span class=\"token punctuation\">{</span>example.com<span class=\"token punctuation\">}</span>/<span class=\"token punctuation\">{</span>example.com<span class=\"token punctuation\">}</span>.key\n<span class=\"token punctuation\">[</span>Mon <span class=\"token number\">23</span> Dec <span class=\"token number\">2019</span> 06:21:49 PM CST<span class=\"token punctuation\">]</span> The intermediate CA cert is <span class=\"token keyword\">in</span>  /var/www/ssl/<span class=\"token punctuation\">{</span>example.com<span class=\"token punctuation\">}</span>/ca.cer\n<span class=\"token punctuation\">[</span>Mon <span class=\"token number\">23</span> Dec <span class=\"token number\">2019</span> 06:21:49 PM CST<span class=\"token punctuation\">]</span> And the full chain certs is there:  /var/www/ssl/<span class=\"token punctuation\">{</span>example.com<span class=\"token punctuation\">}</span>/fullchain.cer</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>","id":"c4216f13-5bb7-5603-a938-76234d3a97cd","fields":{"title":"使用let's encrypt生成泛域名SSL","tags":[],"category":"记录","date":"2019-12-23T19:11:00+08:00","dateModified":"2019-12-23T19:18:19+08:00","slug":"/post/shiyong-letsencrypt-shengcheng-fan-yuming-ssl","status":true,"comment":true},"excerpt":"本记录在Debian 10上通过，虽说是Debian但是其他Linux一样可以使用 获取acme…"}},"pageContext":{"slug":"/post/shiyong-letsencrypt-shengcheng-fan-yuming-ssl","prev":{"slug":"/post/debian9-shengji-10","title":"Debian 9升级10","date":"2019-12-22T20:51:00+08:00","category":"记录","tags":[],"type":"post"},"next":{"slug":"/post/linux-quanxian-shuzi-jiedu","title":"Linux 权限数字解读","date":"2020-01-31T17:35:00+08:00","category":"笔记","tags":["Linux"],"type":"post"}}}}